"use strict";$(function(){FastClick.attach(document.body)});var app=angular.module("app",["ngRoute","ngAnimate","ngTouch"]);app.controller("MainCtrl",["$scope","$element","$window","ConfigFactory",function(a,b,c,d){a.config=d,a.getWidth=function(){return $(window).width()},a.getHeight=function(){return $(window).height()},a.$watch(a.getWidth,function(b){a.window_width=b}),a.$watch(a.getHeight,function(b){a.window_height=b}),window.onresize=function(){a.$apply()},a.contentStyles=function(){var c=a.window_height,d=0;if(a.config.hasFooter&&(c-=b.find("#footer").outerHeight()),a.config.hasHeader){var e=b.find("#header").outerHeight();c-=e,d=e}return"height:"+c+"px; top:"+d+"px"},a.toggleSideNav=function(){b.find("#wrapper, #content .content-cover, #sideNav").toggleClass("open")},a.goBack=function(){c.history.back()}}]),app.factory("ConfigFactory",[function(){return{server:{services:"http://192.237.180.31/dhm/public/api/",assets:"http://192.237.180.31/dhm/public/"},title:"Angular boilerplate from factory",hasFooter:!0,hasHeader:!1,hasSideNavigation:!1,hasBackButton:!1,hasRightButton:!1}}]),app.controller("CalendarCtrl",["$scope","$rootScope","$location","ConfigFactory",function(a,b,c,d){d.title="Calendar",d.hasHeader=!0,d.hasFooter=!0,d.hasSideNavigation=!0,a.config=d,a.events=[{date:"2014-01-09",title:"Lorem ipsum dolor sit.",url:"http://github.com/kylestetz/CLNDR"},{date:"2014-02-09",title:"Lorem ipsum dolor sit.",url:"http://github.com/kylestetz/CLNDR"},{date:"2014-02-09",title:"Lorem ipsum dolor sit 2.",url:"http://github.com/kylestetz/CLNDR"},{date:"2014-02-09",title:"Lorem ipsum dolor sit 3.",url:"http://github.com/kylestetz/CLNDR"},{date:"2014-02-09",title:"Lorem ipsum dolor sit 4.",url:"http://github.com/kylestetz/CLNDR"},{date:"2014-02-09",title:"Lorem ipsum dolor sit 5.",url:"http://github.com/kylestetz/CLNDR"},{date:"2014-02-09",title:"Lorem ipsum dolor sit 6.",url:"http://github.com/kylestetz/CLNDR"},{date:"2014-02-09",title:"Quickly embrace high standards in.",url:"http://github.com/kylestetz/CLNDR"},{date:"2014-02-12",title:"Quickly deliver state of.",url:"http://github.com/kylestetz/CLNDR"},{date:"2014-02-18",title:"Compellingly re-engineer client.",url:"http://github.com/kylestetz/CLNDR"},{date:"2014-02-22",title:"Appropriately expedite",url:"http://github.com/kylestetz/CLNDR"},{date:"2014-03-11",title:"Lorem ipsum dolor sit.",url:"http://github.com/kylestetz/CLNDR"},{date:"2014-03-13",title:"Quickly embrace high standards in.",url:"http://github.com/kylestetz/CLNDR"},{date:"2014-03-13",title:"Quickly deliver state of.",url:"http://github.com/kylestetz/CLNDR"},{date:"2014-03-23",title:"Compellingly re-engineer client.",url:"http://github.com/kylestetz/CLNDR"},{date:"2014-03-26",title:"Appropriately expedite",url:"http://github.com/kylestetz/CLNDR"}],a.calendarOptions={clickEvents:{click:function(a){a.events.length>0&&b.$emit("makeModal",{options:{template:"partials/modals/calendarModal.html",cancelText:"Yep",acceptText:"Ok, go.",title:"Events on "+a.date._i,data:a.events}})},onMonthChange:function(a){console.log("you just went to "+a.format("MMMM, YYYY"))}},doneRendering:function(){console.log("this would be a fine place to attach custom event handlers.")}},a.addEvent=function(){a.events.push(a.newEvent),a.newEvent={}},a.removeEvent=function(){a.events.splice(a.events.length-1,1)}}]),app.controller("ChartsjsCtrl",["$scope","$timeout","ConfigFactory",function(a,b,c){c.title="Chart.js",c.hasHeader=!0,c.hasFooter=!1,c.hasSideNavigation=!0,a.config=c;{var d=$("#myChart").get(0).getContext("2d"),e={scaleOverlay:!1,scaleOverride:!0,scaleSteps:10,scaleStepWidth:1,scaleStartValue:0,scaleLineColor:"rgba(0,0,0,.1)",scaleLineWidth:1,scaleShowLabels:!0,scaleLabel:"<%=value%>",scaleFontFamily:"'Arial'",scaleFontSize:12,scaleFontStyle:"normal",scaleFontColor:"#666",scaleShowGridLines:!0,scaleGridLineColor:"rgba(0,0,0,.05)",scaleGridLineWidth:1,barShowStroke:!0,barStrokeWidth:2,barValueSpacing:5,barDatasetSpacing:1,animation:!0,animationSteps:60,animationEasing:"easeOutQuart",onAnimationComplete:null},f={labels:["CÃ³lico","Dolor\nCabeza","Dolor Espalda","Nauseas"],datasets:[{fillColor:"rgba(151,187,205,0.5)",strokeColor:"rgba(151,187,205,1)",data:[6,2,3,5]}]};new Chart(d).Line(f,e)}}]),app.controller("D3ChartsCtrl",["$scope","$timeout","ConfigFactory",function(a,b,c){c.title="d3 Charts",c.hasHeader=!0,c.hasFooter=!1,c.hasSideNavigation=!0,a.config=c;var d=[{name:"Colico",value:5},{name:"Dolor cabeza",value:6},{name:"Dolor espalda",value:8},{name:"Nauseas",value:6}],e=d3.select(".d3-chart-bar").selectAll("div").data(d),f=e.enter().append("div").attr("class","row bar-row");f.append("div").attr("class","column small-2 tar bar-text").text(function(a){return a.name});var g=f.append("div").attr("class","column small-10").append("div").attr("class"," bar-bar").text(function(a){return a.value});b(function(){g.style("width",function(a){return 10*a.value+"%"})},300)}]),app.controller("DetailCtrl",["$scope","$routeParams","$location","ConfigFactory","MusicService",function(a,b,c,d,e){d.title=b.id,d.hasHeader=!0,d.hasFooter=!1,d.hasSideNavigation=!0,d.hasBackButton=!0,d.hasRightButton=!0,a.config=d,a.itemId=b.id;var f=function(b,c){a.item=b.album,console.log(c)};e.getDetail(b.id).success(f)}]),app.controller("FormsCtrl",["$scope","$location","ConfigFactory",function(a,b,c){c.title="Forms",c.hasHeader=!0,c.hasFooter=!0,c.hasSideNavigation=!0,a.config=c,a.formInfo={},a.formInfo.check1=!0}]),app.controller("HomeCtrl",["$scope","$rootScope","$timeout","ConfigFactory",function(a,b,c,d){d.title="Mi titulo",d.hasHeader=!0,d.hasFooter=!0,d.hasSideNavigation=!0,a.emitToast=function(a){b.$emit("makeToast",{title:"This is an emmited toast",type:a})},a.emitModal=function(a){b.$emit("makeModal",{options:{template:a,cancelText:"Dont fire that",acceptText:"Lets rock!",title:"Modal demo"}})},a.emitStringModal=function(){b.$emit("makeModal",{options:{text:"<p>Some text</p>"}})},a.showLoading=function(){b.$emit("showLoadingPopOver",{text:"Loading some content.",filter:"blur-filter"})}}]),app.controller("ListViewCtrl",["$scope","$location","ConfigFactory","MusicService",function(a,b,c,d){c.title="List View",c.hasHeader=!0,c.hasFooter=!0,c.hasSideNavigation=!0,c.hasBackButton=!1,c.hasRightButton=!1,c.rightButtonFn=function(a){console.log(a)};var e=function(b,c){a.items=b.results.albummatches.album,console.log(c)};d.getStores().success(e),a.getDetails=function(a){b.path("detailDefault/"+a.name),console.log(a)}}]),app.controller("LoginCtrl",["$scope","$rootScope","$location","ConfigFactory",function(a,b,c,d){d.title="Login",d.hasHeader=!0,d.hasFooter=!1,d.hasSideNavigation=!1,a.loginData={},a.loginSubmit=function(){console.log(a.loginData),c.path("/home")}}]),app.controller("MapCtrl",["$scope","$log","ConfigFactory","StoresModel",function(a,b,c,d){c.title="Map demo",c.hasHeader=!0,c.hasFooter=!0,c.hasSideNavigation=!0,a.mapOptions={zoom:13,center:{lat:4.582226749273246,lng:-74.09687547013164}},a.branches="",a.markerClick=function(a){alert("marker clicked",a)};var e=function(b){console.log(b),a.branches=b[3].branches};d.getStores().success(e)}]),app.controller("RecoverCtrl",["$scope","$rootScope","$location","ConfigFactory",function(a,b,c,d){d.title="Recover your password",d.hasHeader=!0,d.hasFooter=!1,d.hasSideNavigation=!1,a.mailsent=!1,a.recoverSubmit=function(){a.mailsent=!a.mailsent}}]),app.controller("SwiperCtrl",["$scope","$location","ConfigFactory",function(a,b,c){c.title="Swiper plugin",c.hasHeader=!0,c.hasFooter=!1,c.hasSideNavigation=!0,a.config=c,a.swithcExample=function(b){a.exampleDisplayed=b},a.swiperOpts1={pagination:".swiper-pagination",cssWidthAndHeight:!1,loop:!0,grabCursor:!0,paginationClickable:!1}}]),app.directive("mbCalendar",["$rootScope",function(){var a="<div class='clndr-controls row'><div class='clndr-control-button column small-2'><span class='clndr-previous-button entypo-font'>&#59237;</span></div><div class='month column small-8 tac'><%= month %> <%= year %></div><div class='clndr-control-button rightalign column small-2'><span class='clndr-next-button entypo-font tar'>&#59238;</span></div></div><table class='clndr-table' border='0' cellspacing='0' cellpadding='0'><thead><tr class='header-days'><% for(var i = 0; i < daysOfTheWeek.length; i++) { %><td class='header-day'><%= daysOfTheWeek[i] %></td><% } %></tr></thead><tbody><% for(var i = 0; i < numberOfRows; i++){ %><tr><% for(var j = 0; j < 7; j++){ %><% var d = j + i * 7; %><td class='<%= days[d].classes %>'><div class='day-contents'><%= days[d].day %></div></td><% } %></tr><% } %></tbody></table>";return{scope:{events:"=mbCalendar",options:"=mbCalendarOptions"},link:function(b,c){var d={template:a,events:b.events},e=$.extend({},d,b.options),f=$(c).clndr(e);b.$watch(function(){return b.events.length},function(a,c){a>c?f.addEvents([b.events[b.events.length-1]]):c>a&&f.setEvents(b.events)},!1)}}}]),app.directive("mbLoadingPopOver",["$rootScope",function(a){return{link:function(b,c){var d={text:"Hang in there! we are getting some nice data just for you.",filter:"blur-filter"};c.on("click",function(){e()});var e=function(){$("#wrapper").removeClass(b.options.filter),c.removeClass("visible")},f=function(){$("#wrapper").addClass(b.options.filter),c.addClass("visible")};a.$on("showLoadingPopOver",function(a,c){b.options=$.extend({},d,c),f()}),a.$on("hideLoadingPopOver",function(){e()})}}}]),app.directive("mbLoadingSpinner",["$rootScope","$timeout",function(){return{template:'<div class="loading-dot"></div><div class="loading-dot"></div><div class="loading-dot"></div><div class="loading-dot"></div>',scope:!0,link:function(a,b){angular.element(b).addClass("loading-dots")}}}]),app.directive("mbGmap",["$rootScope","$parse",function(){return{scope:{markers:"=",options:"=",markerClick:"="},link:function(a,b){var c,d={zoom:13,center:{lat:4.582226749273246,lng:-74.09687547013164},clustered:!0},e=$.extend({},d,a.options),f=function(){var a={zoom:e.zoom,center:new google.maps.LatLng(e.center.lat,e.center.lng)};c=new google.maps.Map($(b).get(0),a)};f(),a.$watch("markers",function(){a.markers&&g()});var g=function(){if(a.markers.length>0){for(var b=[],d=0;d<a.markers.length;d++)if(a.markers[d].lat&&a.markers[d].lng){var f=new google.maps.LatLng(a.markers[d].lat,a.markers[d].lng),g=new google.maps.Marker({position:f,map:c});b.push(g),h(g)}if(e.clustered){new MarkerClusterer(c,b)}}},h=function(b){google.maps.event.addListener(b,"click",function(){return"function"==typeof a.markerClick?a.markerClick(b):void 0})}}}}]),app.directive("mbMarkdown",[function(){var a=new Showdown.converter;return{restrict:"AE",link:function(b,c,d){if(d.mbMarkdown)b.$watch(d.mbMarkdown,function(b){var d=b?a.makeHtml(b):"";c.html(d)});else{var e=a.makeHtml(c.text());c.html(e)}}}}]),app.directive("mbModalBox",["$http","$compile","$timeout","$rootScope","$templateCache","ConfigFactory",function(a,b,c,d,e,f){return{scope:!0,link:function(c,g){var h={cancelText:"CANCELAR",hasCancelBtn:!0,acceptText:"OK",hasAcceptBtn:!0,title:"Alert"};d.$on("makeModal",function(a,b){i(b)});var i=function(d){c.options=$.extend({},h,d.options),c.options.template?a.get(c.options.template,{cache:e}).success(function(a){j(b(a)(c))}).error(function(){console.log("The modal cannot load the template you provided")}):c.options.text?j(c.options.text):console.log("The modal cannot be displayed. You have to provide a valid template or text variable")},j=function(a){f.wrapperIsBlured=!0,$(g).find(".content").empty().append(a),$(g).addClass("show")};c.closeModal=function(){$(g).removeClass("show"),f.wrapperIsBlured=!1,console.log(c.modalData)}}}}]),app.directive("mbScrollfixer",["$timeout",function(a){return{link:function(b,c){var d=$(c);d.on("touchstart",function(){}),a(function(){d.css({"overflow-y":"hidden","-webkit-overflow-scrolling":"none"}),a(function(){d.css({"overflow-y":"scroll","-webkit-overflow-scrolling":"touch"})},600)},600)}}}]),app.directive("mbSwiper",["$timeout",function(a){return{priority:2e3,transclude:!0,template:'<div class="swiper-container"><div class="swiper-wrapper" ng-transclude></div></div>',scope:{waitFor:"=mbSwiperWaitfor"},link:function(b,c,d){var e={loop:!0,grabCursor:!0},f=function(){b.options=b.$eval(d.mbSwiperOptions)||{};var a=$.extend({},e,b.options);if(c.find(".swiper-wrapper > div").addClass("swiper-slide"),b.options.pagination&&"string"==typeof b.options.pagination){var f=b.options.pagination.replace(".","");c.append($('<div class="'+f+'"></div>'))}{var g=c.find(".swiper-container");g.swiper(a)}};d.mbSwiperWaitfor?b.$watch("waitFor",function(b){b&&a(function(){f()},100)}):f()}}}]),app.directive("mbSwiperScroll",[function(){return{template:'<div class="swiper-scrollbar swiper-scrollbar-vertical"></div><div class="swiper-wrapper"><div class="swiper-slide" ng-transclude></div></div></div>',transclude:!0,scope:!0,link:function(a,b){$(b).swiper({scrollContainer:!0,mode:"vertical",scrollbar:{container:".swiper-scrollbar"}})}}}]),app.directive("mbSwitch",["$rootScope","$timeout",function(){return{template:'<div class="onOffSwitch" ng-swipe-left="off()" ng-swipe-right="on()"><div class="handle"></div><div class="text on" ng-class="{shown: isChecked==true}">{{onText}}</div><div class="text off" ng-class="{shown: isChecked==false}">{{offText}}</div><div class="hidden" ng-transclude></div></div>',transclude:!0,scope:{ngModel:"=",mbSwitchOn:"@",mbSwitchOff:"@"},link:function(a,b){var c=b.find("input[type=checkbox]");a.isChecked=void 0!==a.ngModel?a.ngModel:!0,a.onText=a.mbSwitchOn||"ON",a.offText=a.mbSwitchOff||"OFF",a.$watch("isChecked",function(b){c.prop("checked",b),void 0!==a.ngModel&&(a.ngModel=b),d(b)});var d=function(a){a?$(b).find(".handle").removeClass("off"):$(b).find(".handle").addClass("off")};a.toggle=function(){a.$apply(function(){a.isChecked=!a.isChecked})},a.on=function(){a.isChecked=!0},a.off=function(){a.isChecked=!1},b.on("click",function(){a.toggle()})}}}]),app.directive("mbToast",["$rootScope","$timeout",function(a,b){return{scope:!0,link:function(c){function d(a){c.messages.push(a),e()}function e(){b(function(){c.messages.splice(0,1)},2500)}c.messages=[],a.$on("makeToast",function(a,b){d(b)})}}}]),app.filter("upperCase",function(){return function(a){return a.toUpperCase()}}),app.config(["$routeProvider",function(a){a.when("/login",{templateUrl:"partials/login/login.html",controller:"LoginCtrl"}).when("/login/recover",{templateUrl:"partials/login/recover.html",controller:"RecoverCtrl"}).when("/home",{templateUrl:"partials/home/home.html",controller:"HomeCtrl"}).when("/forms",{templateUrl:"partials/forms/forms.html",controller:"FormsCtrl"}).when("/listview",{templateUrl:"partials/listview/listview.html",controller:"ListViewCtrl"}).when("/detailDefault/:id",{templateUrl:"partials/details/detailDefault.html",controller:"DetailCtrl"}).when("/calendar",{templateUrl:"partials/calendar/calendar.html",controller:"CalendarCtrl"}).when("/swiper",{templateUrl:"partials/swiper/swiper.html",controller:"SwiperCtrl"}).when("/map",{templateUrl:"partials/map/map.html",controller:"MapCtrl"}).when("/chartsjs",{templateUrl:"partials/charts/chartsjs.html",controller:"ChartsjsCtrl"}).when("/d3Charts",{templateUrl:"partials/charts/d3Charts.html",controller:"D3ChartsCtrl"}).otherwise({redirectTo:"/home"})}]),app.factory("MusicService",["$http","$rootScope","ConfigFactory",function(a,b){return{getStores:function(){return a.get("http://ws.audioscrobbler.com/2.0/?method=album.search&album=red+hot+chilli&artist=red+hot+chilli&api_key=77725761af78cf82f9d7a9b304be958e&format=json").error(function(){b.$emit("makeToast",{title:"Algo salio mal por favor vuelve a intentarlo",type:"error"})}).success(function(a){console.log(a)})},getDetail:function(c){return a.get("http://ws.audioscrobbler.com/2.0/?method=album.getinfo&artist=red+hot+chilli+peppers&album="+c+"&api_key=77725761af78cf82f9d7a9b304be958e&format=json").error(function(){b.$emit("makeToast",{title:"Algo salio mal por favor vuelve a intentarlo",type:"error"})}).success(function(a){console.log(a)})}}}]),app.factory("StoresModel",["$http","$rootScope","ConfigFactory",function(a,b){return{getStores:function(){return a.get("http://192.237.180.31/dhm/public/api/stores?branches=true&offers=true").error(function(){b.$emit("makeToast",{title:"Algo salio mal por favor vuelve a intentarlo",type:"error"})}).success(function(){})}}}]);